
   PASS  Tests\Feature\Admin\AdminPanelTest
  âœ“ authenticated admin can access dashboard                             3.77s  
  âœ“ dashboard page title displayed                                       0.20s  
  âœ“ dashboard renders html                                               0.23s  
  âœ“ admin can create caller                                              0.25s  
  âœ“ admin dashboard loads without errors                                 0.25s  
  âœ“ sidebar navigation present                                           0.17s  
  âœ“ multiple admins can access dashboard                                 0.28s  
  âœ“ dashboard responds quickly                                           0.19s  

   PASS  Tests\Feature\Admin\DashboardWidgetsTest
  âœ“ animated stats widget mounts                                         0.12s  
  âœ“ animated stats widget calculates totals                              0.15s  
  âœ“ quick actions widget returns actions                                 0.11s  
  âœ“ recent activity widget instantiates                                  0.28s  
  âœ“ winners history widget instantiates                                  0.87s  
  âœ“ dashboard page loads                                                 0.23s  
  âœ“ animated stats caches data                                           0.09s  
  âœ“ animated stats with zero callers                                     0.08s  
  âœ“ quick actions contain valid urls                                     0.13s  
  âœ“ dashboard contains valid html                                        0.20s  

   PASS  Tests\Feature\AdminPanelTest
  âœ“ admin can access filament panel                                      0.18s  
  âœ“ guest cannot access admin panel                                      0.11s  

   PASS  Tests\Feature\Auth\AuthenticationTest
  âœ“ login screen can be rendered                                         0.11s  
  âœ“ users can authenticate using the login screen                        1.43s  
  âœ“ users can not authenticate with invalid password                     0.35s  

   PASS  Tests\Feature\Auth\EmailVerificationTest
  âœ“ application does not require email verification for callers          0.10s  

   PASS  Tests\Feature\Auth\PasswordConfirmationTest
  âœ“ application does not require password confirmation for callers       9.09s  

   PASS  Tests\Feature\Auth\PasswordResetTest
  âœ“ reset password link screen can be rendered                           2.43s  
  âœ“ reset password link can be requested                                 2.74s  
  âœ“ reset password screen can be rendered                                0.66s  
  âœ“ password can be reset with valid token                               5.67s  

   PASS  Tests\Feature\Auth\RegistrationTest
  âœ“ splash screen can be rendered                                        0.19s  
  âœ“ home registration page can be rendered                               0.33s  
  âœ“ family registration page can be rendered                             0.26s  

   FAIL  Tests\Feature\CallerModelTest
  â¨¯ winners scope returns only winners                                   0.31s  
  â¨¯ eligible scope excludes winners                                      0.47s  
  â¨¯ eligible scope excludes callers without cpr                          0.22s  
  â¨¯ get eligible callers static method                                   0.82s  
  âœ“ select random winner by cpr                                          0.33s  
  â¨¯ select random winner returns null when all are winners               0.13s  
  âœ“ increment hits increases hit count                                   0.23s  
  âœ“ increment hits updates last hit timestamp                            0.11s  
  âœ“ increment hits is atomic                                             0.18s  
  âœ“ caller fillable attributes                                           0.14s  
  âœ“ caller casts are applied                                             0.26s  
  âœ“ caller relationships                                                 0.52s  
  âœ“ eligible callers with various statuses                               0.10s  
  âœ“ callers can be marked as family                                      0.08s  
  âœ“ callers can be marked as individual                                  0.10s  
  âœ“ caller tracks registration time                                      0.11s  

   PASS  Tests\Feature\CallerRegistrationTest
  âœ“ individual registration form can be submitted                        0.97s  
  âœ“ family registration form can be submitted                            0.17s  
  âœ“ existing caller can register again and increment hits                1.01s  
  âœ“ registration stores ip address                                       0.21s  
  âœ“ registration with invalid data fails validation                      0.37s  
  âœ“ registration type validation works                                   0.44s  
  âœ“ family registration requires family members count between 2 and 10   1.47s  
  âœ“ seeded callers are available in database                             0.27s  
  âœ“ seeded winners are properly marked                                   0.77s  

   PASS  Tests\Feature\CprHashingServiceTest
  âœ“ hash cpr creates hash                                                1.70s  
  âœ“ verify cpr succeeds with correct cpr                                 2.11s  
  âœ“ verify cpr fails with incorrect cpr                                  3.67s  
  âœ“ mask cpr hides most digits                                           0.10s  
  âœ“ mask cpr preserves length                                            0.07s  
  âœ“ different hashes for same cpr                                        4.37s  
  âœ“ mask handles short cpr                                               0.11s  
  âœ“ hash is consistent for verification                                  7.28s  

   PASS  Tests\Feature\FilamentDashboardFeatureTest
  âœ“ admin can access dashboard                                           4.67s  
  âœ“ dashboard contains quick actions widget                              3.63s  
  âœ“ dashboard contains stats overview                                    6.91s  
  âœ“ dashboard authenticated access only                                  4.74s  
  âœ“ dashboard has no missing widgets                                    10.13s  
  âœ“ dashboard loads with empty callers                                   2.54s  
  âœ“ dashboard widgets polling intervals are valid                        3.21s  
  âœ“ recent activity widget shows latest callers                          5.76s  
  âœ“ winners history widget shows only winners                            4.14s  
  âœ“ dashboard charts render without error                                2.60s  

   FAIL  Tests\Feature\FormValidationTest
  â¨¯ store caller request validates required name                         0.34s  
  â¨¯ store caller request validates required cpr                          0.55s  
  â¨¯ store caller request validates required phone number                 0.08s  
  â¨¯ store caller request validates registration type                     0.10s  
  â¨¯ store caller request validates family members minimum                0.12s  
  â¨¯ store caller request validates family members maximum                0.13s  
  â¨¯ store caller request allows valid family registration                0.18s  
  â¨¯ store caller request allows valid individual registration            0.20s  
  â¨¯ store caller request validates name max length                       0.65s  
  â¨¯ store caller request validates cpr max length                        0.30s  
  â¨¯ store caller request validates phone max length                      0.11s  
  â¨¯ update caller request validates required fields                      0.09s  
  â¨¯ update caller request validates unique cpr                           0.13s  
  â¨¯ update caller request allows same cpr for same caller                0.09s  
  â¨¯ bilingual validation messages are available                          0.08s  

   PASS  Tests\Feature\Settings\PasswordUpdateTest
  âœ“ application does not require password updates for callers            0.10s  

   PASS  Tests\Feature\Settings\ProfileUpdateTest
  âœ“ application does not require profile updates for callers             0.08s  

   PASS  Tests\Feature\VersionManagerTest
  âœ“ get version returns current version                                  0.07s  
  âœ“ get version info returns array                                       0.07s  
  âœ“ version is consistent                                                0.08s  
  âœ“ version has semantic versioning                                      0.06s  
  âœ“ version info contains name                                           0.07s  
  âœ“ version info contains timestamp                                      0.05s  
  âœ“ increment patch version                                              0.12s  
  âœ“ increment minor version                                              0.25s  
  âœ“ increment major version                                              0.22s  
  âœ“ version file exists                                                  0.18s  
  âœ“ version file contains valid json                                     0.45s  

   PASS  Tests\Feature\VersionSyncCommandTest
  âœ“ version sync command exists                                          0.17s  
  âœ“ version sync fails without version file                              0.22s  
  âœ“ version sync fails without version json file                         0.48s  
  âœ“ version sync updates version json from version file                  0.18s  
  âœ“ version sync dry run does not modify files                           0.09s  
  âœ“ version sync detects when already synchronized                       0.11s  
  âœ“ version sync handles version without build number                    0.12s  
  âœ“ version sync fails with invalid version format                       0.20s  
  âœ“ version sync can update env files                                    0.25s  
  âœ“ version sync from version json to version file                       0.82s  
  âœ“ version sync preserves changelog entries                             0.11s  
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\CallerModelTest > winners scope returns only winnerâ€¦   
  Failed asserting that 6 matches expected 3.

  at tests/Feature/CallerModelTest.php:27
     23â–•     public function test_winners_scope_returns_only_winners(): void
     24â–•     {
     25â–•         $winners = Caller::winners()->get();
     26â–• 
  âžœ  27â–•         $this->assertEquals(3, $winners->count());
     28â–•         $winners->each(fn ($winner) => $this->assertTrue($winner->is_winner));
     29â–•     }
     30â–• 
     31â–•     public function test_eligible_scope_excludes_winners(): void

  1   tests/Feature/CallerModelTest.php:27

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\CallerModelTest > eligible scope excludes winners      
  Failed asserting that 1266 matches expected 5.

  at tests/Feature/CallerModelTest.php:35
     31â–•     public function test_eligible_scope_excludes_winners(): void
     32â–•     {
     33â–•         $eligible = Caller::eligible()->get();
     34â–• 
  âžœ  35â–•         $this->assertEquals(5, $eligible->count());
     36â–•         $eligible->each(fn ($caller) => $this->assertFalse($caller->is_winner));
     37â–•     }
     38â–• 
     39â–•     public function test_eligible_scope_excludes_callers_without_cpr(): void

  1   tests/Feature/CallerModelTest.php:35

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\CallerModelTest > eligible scope exâ€¦  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: callers.cpr (Connection: sqlite, Database: database/alsaryatv.sqlite, SQL: insert into "callers" ("name", "phone", "cpr", "is_family", "is_winner", "ip_address", "hits", "last_hit", "status", "notes", "created_at", "updated_at") values (Ø³Ø§Ø±Ø© Ø­ØµØ© Ø§Ù„Ø®Ù„ÙŠÙØ©, 32699225, ?, 1, 0, 211.62.253.141, 29, 2026-01-29 09:58:42, inactive, ?, 2026-02-03 04:44:30, 2026-02-13 12:08:44))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:584
    580â–•             $this->bindValues($statement, $this->prepareBindings($bindings));
    581â–• 
    582â–•             $this->recordsHaveBeenModified();
    583â–• 
  âžœ 584â–•             return $statement->execute();
    585â–•         });
    586â–•     }
    587â–• 
    588â–•     /**

      [2m+16 vendor frames [22m
  17  tests/Feature/CallerModelTest.php:41

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\CallerModelTest > get eligible callers static methoâ€¦   
  Failed asserting that 1266 matches expected 5.

  at tests/Feature/CallerModelTest.php:53
     49â–•     public function test_get_eligible_callers_static_method(): void
     50â–•     {
     51â–•         $eligible = Caller::getEligibleCallers()->get();
     52â–• 
  âžœ  53â–•         $this->assertEquals(5, $eligible->count());
     54â–•     }
     55â–• 
     56â–•     public function test_select_random_winner_by_cpr(): void
     57â–•     {

  1   tests/Feature/CallerModelTest.php:53

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\CallerModelTest > select random winner returâ€¦  Error   
  Non-static method Illuminate\Database\Eloquent\Model::update() cannot be called statically

  at tests/Feature/CallerModelTest.php:69
     65â–•     }
     66â–• 
     67â–•     public function test_select_random_winner_returns_null_when_all_are_winners(): void
     68â–•     {
  âžœ  69â–•         Caller::update(['is_winner' => true]);
     70â–• 
     71â–•         $winner = Caller::selectRandomWinnerByCpr();
     72â–• 
     73â–•         $this->assertNull($winner);

  1   tests/Feature/CallerModelTest.php:69

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:22
     18â–•             'phone_number' => '+97312345678',
     19â–•             'registration_type' => 'individual',
     20â–•         ]);
     21â–• 
  âžœ  22â–•         $response->assertSessionHasErrors('name');
     23â–•     }
     24â–• 
     25â–•     public function test_store_caller_request_validates_required_cpr(): void
     26â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:34
     30â–•             'phone_number' => '+97312345678',
     31â–•             'registration_type' => 'individual',
     32â–•         ]);
     33â–• 
  âžœ  34â–•         $response->assertSessionHasErrors('cpr');
     35â–•     }
     36â–• 
     37â–•     public function test_store_caller_request_validates_required_phone_number(): void
     38â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:46
     42â–•             'phone_number' => '',
     43â–•             'registration_type' => 'individual',
     44â–•         ]);
     45â–• 
  âžœ  46â–•         $response->assertSessionHasErrors('phone_number');
     47â–•     }
     48â–• 
     49â–•     public function test_store_caller_request_validates_registration_type(): void
     50â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:58
     54â–•             'phone_number' => '+97312345678',
     55â–•             'registration_type' => 'invalid',
     56â–•         ]);
     57â–• 
  âžœ  58â–•         $response->assertSessionHasErrors('registration_type');
     59â–•     }
     60â–• 
     61â–•     public function test_store_caller_request_validates_family_members_minimum(): void
     62â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:71
     67â–•             'registration_type' => 'family',
     68â–•             'family_members' => 1, // Too low, minimum is 2
     69â–•         ]);
     70â–• 
  âžœ  71â–•         $response->assertSessionHasErrors('family_members');
     72â–•     }
     73â–• 
     74â–•     public function test_store_caller_request_validates_family_members_maximum(): void
     75â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:84
     80â–•             'registration_type' => 'family',
     81â–•             'family_members' => 11, // Too high, maximum is 10
     82â–•         ]);
     83â–• 
  âžœ  84â–•         $response->assertSessionHasErrors('family_members');
     85â–•     }
     86â–• 
     87â–•     public function test_store_caller_request_allows_valid_family_registration(): void
     88â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request allows vaâ€¦   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 419.
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:97
     93â–•             'registration_type' => 'family',
     94â–•             'family_members' => 5,
     95â–•         ]);
     96â–• 
  âžœ  97â–•         $response->assertRedirect(route('callers.success'));
     98â–•     }
     99â–• 
    100â–•     public function test_store_caller_request_allows_valid_individual_registration(): void
    101â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request allows vaâ€¦   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 419.
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:109
    105â–•             'phone_number' => '+97312345678',
    106â–•             'registration_type' => 'individual',
    107â–•         ]);
    108â–• 
  âžœ 109â–•         $response->assertRedirect(route('callers.success'));
    110â–•     }
    111â–• 
    112â–•     public function test_store_caller_request_validates_name_max_length(): void
    113â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:121
    117â–•             'phone_number' => '+97312345678',
    118â–•             'registration_type' => 'individual',
    119â–•         ]);
    120â–• 
  âžœ 121â–•         $response->assertSessionHasErrors('name');
    122â–•     }
    123â–• 
    124â–•     public function test_store_caller_request_validates_cpr_max_length(): void
    125â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:133
    129â–•             'phone_number' => '+97312345678',
    130â–•             'registration_type' => 'individual',
    131â–•         ]);
    132â–• 
  âžœ 133â–•         $response->assertSessionHasErrors('cpr');
    134â–•     }
    135â–• 
    136â–•     public function test_store_caller_request_validates_phone_max_length(): void
    137â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > store caller request validatesâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:145
    141â–•             'phone_number' => str_repeat('1', 46), // Max is 45
    142â–•             'registration_type' => 'individual',
    143â–•         ]);
    144â–• 
  âžœ 145â–•         $response->assertSessionHasErrors('phone_number');
    146â–•     }
    147â–• 
    148â–•     public function test_update_caller_request_validates_required_fields(): void
    149â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > update caller request validateâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:159
    155â–•                 'phone_number' => '+97312345678',
    156â–•                 'cpr' => '12345678901',
    157â–•             ]);
    158â–• 
  âžœ 159â–•         $response->assertSessionHasErrors('name');
    160â–•     }
    161â–• 
    162â–•     public function test_update_caller_request_validates_unique_cpr(): void
    163â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > update caller request validateâ€¦   
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:174
    170â–•                 'phone_number' => '+97312345678',
    171â–•                 'cpr' => '12345678901', // Already taken by caller1
    172â–•             ]);
    173â–• 
  âžœ 174â–•         $response->assertSessionHasErrors('cpr');
    175â–•     }
    176â–• 
    177â–•     public function test_update_caller_request_allows_same_cpr_for_same_caller(): void
    178â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > update caller request allows sâ€¦   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 419.
Failed asserting that false is true.

  at tests/Feature/FormValidationTest.php:188
    184â–•                 'phone_number' => '+97312345678',
    185â–•                 'cpr' => '12345678901', // Same CPR, same caller
    186â–•             ]);
    187â–• 
  âžœ 188â–•         $response->assertRedirect(route('dashboard'));
    189â–•     }
    190â–• 
    191â–•     public function test_bilingual_validation_messages_are_available(): void
    192â–•     {

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\FormValidationTest > bilingâ€¦  BadMethodCallException   
  Method Illuminate\Http\JsonResponse::getSession does not exist.

  at vendor/laravel/framework/src/Illuminate/Macroable/Traits/Macroable.php:115
    111â–•      */
    112â–•     public function __call($method, $parameters)
    113â–•     {
    114â–•         if (! static::hasMacro($method)) {
  âžœ 115â–•             throw new BadMethodCallException(sprintf(
    116â–•                 'Method %s::%s does not exist.', static::class, $method
    117â–•             ));
    118â–•         }
    119â–•

      [2m+1 vendor frames [22m
  2   tests/Feature/FormValidationTest.php:202


  Tests:    20 failed, 94 passed (243 assertions)
  Duration: 118.67s

